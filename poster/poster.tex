\documentclass{beamer}
\usepackage[orientation=portrait,size=a1,scale=1.4]{beamerposter}
\mode<presentation>{\usetheme{UKM}}
\usepackage[utf8]{inputenc}
\usepackage{siunitx} %pretty measurement unit rendering
\usepackage{ragged2e}
\usepackage[font=scriptsize,justification=justified]{caption}
\usepackage{array,booktabs,tabularx}
\usepackage{pgf-pie}
% Fix pgf-pie package
\usepackage{xpatch}
\makeatletter
\def\setcolor#1\pgfeov{\def\pgfpie@color{#1}}
\pgfkeyslet{/color/.@cmd}{\setcolor}
\xpatchcmd{\pgfpie@findColor}{\color}{\pgfpie@color}{}{}
\xpatchcmd{\pie}{\color}{\pgfpie@color}{}{}
\makeatother
\usepackage{tikz}
\usetikzlibrary{graphs, graphs.standard, quotes, arrows,shapes,positioning}
\usepackage{pgfplots}
\usepgfplotslibrary{units}

\title{Improvements of the Balance Discovery Attack on Lightning Network Payment Channels}
\author{Drs. Gijs van Dam}
% Additional variables
% \newcommand{\email}{p95677@siswa.ukm.edu.my}
\email{p95677@siswa.ukm.edu.my}
\telephone{+601-7283 4642}
\photo{img/Gijs.jpg}
\institute{Institute of Visual Informatics}
\supervisors{{img/Rabiah.jpg,{Dr. Rabiah Abdul Kadir,Institute of Visual Informatics,rabiahivi@ukm.edu.my,+603-8921 7167}}, {img/Puteri.png,{Dr. Puteri Nor Ellyza Nohuddin,Institute of Visual Informatics,puteri.ivi@ukm.edu.my,+603-8921 7168}}, {img/Halimah.jpg,{Prof. Datoâ€™ Dr. Halimah Badioze Zaman,Institute of Visual Informatics,halimahivi@ukm.edu.my,+603-8921 6079}}}
\date{\today}

% edit this depending on how tall your header is. We should make this scaling automatic :-/
\newlength{\columnheight}
\setlength{\columnheight}{68cm}

\begin{document}
  \begin{frame}
    \begin{columns}
      \begin{column}{.5\textwidth}
        \begin{beamercolorbox}[center]{postercolumn}
          \begin{minipage}{.98\textwidth}  % tweaks the width, makes a new \textwidth
            \parbox[t][\columnheight]{\textwidth}{ % must be some better way to set the the height, width and textwidth simultaneously
              \begin{myblock}{What is Lightning?}
                Bitcoin is designed to only handle 3 to 7 transactions per second, worldwide. This is way too few to make Bitcoin a viable alternative for a centralized global payment network. Payment Channel Networks are a technique on top of Bitcoin to make it more scalable. Lightning Network \cite{Poon2016} is the first of such networks that has been put into practice. Lightning Network has the potential to handle enough transaction to rival payment networks like VISA.
                \begin{figure}
                  \begin{minipage}{0.94\textwidth}
                    \centering
                    \tikzset{
                      auto,node distance =1.5 cm and 1.5 cm,semithick,
                      state/.style ={circle, draw, minimum width = 1 cm}
                    }
                    \begin{tikzpicture}
                      \node[state] (a) at (0,0) {};
                      \node[state] (b) [below left =of a] {};
                      \node[state] (c) [right =of b] {};
                      \node[state] (d) [right =of c] {};
                      \node[state] (e) [right =of d] {};
                      \node[state] (f) [below right =of b] {};
                      \node[state] (g) [right =of f] {};
                      \node[state] (h) [right =of g] {};
                      \node[state] (i) [below left =of f] {};
                      \node[state] (j) [below =of g] {};
                      \path (a) edge (c);
                      \path (a) edge (d);
                      \path (b) edge (c);
                      \path (c) edge (d);
                      \path (d) edge (e);
                      \path (c) edge (f);
                      \path (c) edge (g);
                      \path (d) edge (h);
                      \path (f) edge (i);
                      \path (g) edge (j);
                      \path (h) edge (j);
                    \end{tikzpicture}
                    \caption{Lightning Network as a Graph with edges being channels and vertices being Lightning Nodes}
								    \label{fig:network}
                  \end{minipage}
                \end{figure}
              \end{myblock}
              \begin{myblock}{Lightning and Privacy}
                For our analysis of Privacy in the context of Lighting we used the following threat model \cite{Malavolta2017}
                \begin{itemize}
                  \item Balance security: Users don't run the risk of losing coins.
                  \item Serializability: Executions of a PCN are serializable as understood in concurrency control of transaction processing.
                  \item (Off-path) Value Privacy: Malicious participants in the network cannot learn information about payments they aren't part of.
                  \item (On-path) Relationship Anonymity: Intermediaries cannot determine the sender and the receiver of a transaction better than just by guessing.
                \end{itemize}
                Our research focusses on Value Privacy.
              \end{myblock}
              \begin{myblock}{Balance Discovery Attack}
                In the basic Balance Discovery Attack\cite{Herrera-Joancomarti2019b}, M opens up a channel with A, and tries to route fake/unknown payments to B.
                If the balance between A and B allows for the payment, B returns an error stating the payment is unknown. If the balance doesn't allow for the payment, A returns an error stating insufficient balance. Using a simple binary search algorithm, the exact balance is disclosed.
                \begin{figure}
                  \begin{minipage}{0.94\textwidth}
                    \centering
                    \tikzset{
                      auto,node distance =3 cm and 3 cm,semithick,
                      state/.style ={circle, draw, minimum width = 2 cm}
                    }
                    \begin{tikzpicture}
                      \node[state] (m) at (0,0) {$M$};
                      \node[state] (a) [right =of m] {$A$};
                      \node[state] (b) [right =of a] {$B$};
                      \path (m) edge (a);
                      \path (a) edge (b);
                    \end{tikzpicture}
                    \caption{Basic Balance Discovery Attack with M probing the balance between A and B}
                    \label{fig:basic}
                  \end{minipage}
                \end{figure}
                This attack makes it possible to trace payments by monitoring balances over time. Value Privacy is threatened because of this.
              \end{myblock}
              \begin{myblock}{Two-way probing}
                The basic attack has an upper bound of $BTC\;0.0429$. Our improved attack (See fig. \ref{fig:twoway}) raises that upper bound to $BTC\;0.0859$
                \begin{figure}
                  \begin{minipage}{0.94\textwidth}
                    \centering
                    \tikzset{
                        auto,node distance =3 cm and 3 cm,semithick,
                        state/.style ={circle, draw, minimum width = 2 cm},
                        optional/.style={dashed},
                    }
                    \begin{tikzpicture}
                      \node[state] (m) at (0,0) {$M$};
                      \node[state] (a) [below left =of m, xshift=0.4cm] {$A$};
                      \node[state] (b) [below right =of m, xshift=-0.4cm] {$B$};
                      \path (m) edge[bend right=20] (a);
                      \path (a) edge[bend right=20] (b);
                      \path[optional] (m) edge[bend left=20] (b);
                    \end{tikzpicture}
                    \caption{Basic scenario with an optional second channel for two-way probing}
                    \label{fig:twoway}
                  \end{minipage}
                \end{figure}
              \end{myblock}\vfill
        }\end{minipage}\end{beamercolorbox}
    \end{column}
    \begin{column}{.5\textwidth}
      \begin{beamercolorbox}[center]{postercolumn}
        \begin{minipage}{.98\textwidth} % tweaks the width, makes a new \textwidth
          \parbox[t][\columnheight]{\textwidth}{ % must be some better way to set the the height, width and textwidth simultaneously
          \begin{myblock}{Results: Improved algorithm}
            The Two-way Probing raises the percentage of channels that can have their balances disclosed from 89.1\% to 94.3\% 
            \begin{figure}
              \begin{minipage}{0.8\textwidth}
                \centering
                \begin{tikzpicture}
                  \begin{axis}[
                      xlabel={Channels (sorted by increasing capacity)},
                      ylabel={Percentage of Channels},
                      width=0.8\textwidth,
                      xmin=0, xmax=16777215,
                      ymin=0, ymax=100,
                      ytick={0,20,40,60,80,100},
                      xtick={2000000,4000000,6000000,8000000,10000000,12000000,14000000,16000000},
                      x label style={at={(axis description cs:0.5,-0.1)},anchor=north},
                      y label style={at={(axis description cs:0,.5)},anchor=south},
                      legend pos=south east,
                      ymajorgrids=true,
                      grid style=dashed,
                  ]
                  
                  \addplot[
                      color=blue,
                      mark=none,
                      ultra thick,
                      each nth point=5
                      ]
                      table {../source/data/capacity.dat};
                  \legend{Cum. perc. of Channels};
                  
                  \draw [dashed, draw=red] 
                      (axis cs: 4294967,0) -- node[below=5pt, font=\small, sloped] {$MAX\_PAYMENT\_ALLOWED$} (axis cs: 4294967,100);
                  
                  \draw [dashed, draw=red] 
                      (axis cs: 8589934,0) -- node[below=5pt, font=\small, sloped] {$2 \times MAX\_PAYMENT\_ALLOWED$} (axis cs: 8589934,100);
                  
                  \end{axis}
                \end{tikzpicture}
                \caption{Basic attack compared to two-way probing}
                \label{fig:capacity}
              \end{minipage}
            \end{figure}
          \end{myblock}
          \begin{myblock}{Results: Software differences}
            There are three main software implementations of the Lightning specifications that together have a share of over 99\% of the network. (See fig. \ref{fig:share})
            \begin{figure}
              \begin{minipage}{0.94\textwidth}
                \centering
                \begin{tikzpicture}
                \pie[color={black!10,black!20,black!30,black!40},sum=100]
                    {80.59/LND,14.65/c-lightning,4.03/Eclair}
                \end{tikzpicture}
                \caption{Network share of three main clients}
                \label{fig:share}
              \end{minipage}
            \end{figure}
            This research also found differences between the three main clients that can be exploited in two ways.
            \begin{itemize}
              \item Uncover channel balances with no upper bound in channels with LND software on both nodes.
              \item Shutdown channels with LND software on one node and c-lightning software on the other.
            \end{itemize}
            The former increases the percentage of channels that can have their balances disclosed to 98.4\%. The latter affects 2.7\% of all channels.
          \end{myblock}
          \begin{myblock}{References}
            \bibliography{library} 
            \bibliographystyle{abbrv}
          \end{myblock}\vfill
      }\end{minipage}\end{beamercolorbox}
    \end{column}
  \end{columns}
  \end{frame}
\end{document}

